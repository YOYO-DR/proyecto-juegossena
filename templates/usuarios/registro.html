{% extends 'base.html' %} {% load static %} {% block contenido %}
<div class="inicio mt-2">
  <div>
    <h1>Registro</h1>
    <p id="mensaje"></p>
    <form
    id="form"
      method="POST"
      class="border rounded p-3 col-lg-5 col-md-7 col-sm-9 col-xxl-4"
    >
      {% csrf_token %} {% for field in form.visible_fields %}
      <div class="mb-3">
        <label class="form-label" for="{{field.id_for_label}}"
          >{{field.label}}</label
        >
        {{field}}
      </div>
      {% endfor %}
      <div class="mb-3">
        <a href="{% url 'usuarios:iniciarsesion' %}" class="link-primary w-auto"
          >Â¿Ya tiene una cuenta?</a
        >
      </div>
      <button class="btn btn-success" type="submit">Registrarse</button>
    </form>
  </div>
</div>

{% endblock contenido %} {% block js %}
<script>
  document.addEventListener("DOMContentLoaded", function () {
    const form = document.getElementById("form");
    const mensaje = document.getElementById("mensaje");

    let callback = (data) => {
      if ("error" in data) {
        mensaje.className = "mensaje-error";
        mensaje.innerHTML = data.error;
      } else {
        mensaje.className ="mensaje-correcto";
        mensaje.innerHTML="Se ha enviado un correo para activar su cuenta, revisa tu bandeja de entrada";
        form.remove()
      }
    };
    peticionFormPost(
      "form", // id formulario
      ".",
      callback
    );
  });
</script>
{% endblock js %}